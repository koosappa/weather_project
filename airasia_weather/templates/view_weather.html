
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.css" />

    <script>
        function multipleFunc() {
            var selectedValues = $('#city').val();
            alert(selectedValues);
            $.ajax({
                    type:"POST",
                    url: "multiple_select",
                    headers: {'X-CSRFToken': csrftoken},
                    data: {
                    "multi":selectedValues
                    },
                    async:false,
                    success: function(data){
                    myData = data

                     console.log("Im final data" + myData)
            },
            fail:function(err){
                alert("failed");
            }

  });

        }
     </script>

</head>
<body>
    <section class="hero is-primary">
        <div class="container">
            <div class="get-quote">
                <div class="row">
                    <div class="col-sm-6 col-12">
                        <a href="/"><h3 id="quote">AirAsia  Weather</h3></a>
                    </div>
                    <div class="col-sm-4 col-12">

                        <a type="button" class="btn btn-success" href='add_city'>Add City</button>
                        <a type="a" class="btn btn-success" href='location'>Location</a>
                        <!-- <a type="a" class="btn btn-success" heref='table_content'>Table/Carosal</a> -->
                        <a type="a" class="btn btn-success" href='view_data'>5 days View</a>
                        
                        
                    </div>
                    
                </div>
            </div>
        </div>
    </section>

    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-offset-4 is-4">

     
            <form action="/view_data" method="post">
                {% csrf_token %}
                <select class="form-select form-select-lg mb-3" aria-label="Default select example" name = "city" id="city">
                    {% for i in city_names %}
                    <option value={{ i }} name= {{ i }} > {{ i }}</option>
                    {% endfor %}
                </select>

                <input type="submit" value="Select City" >

                {% if message %}
                            <div class="notification {{ message_class }}">{{ message }}<button class="del-msg delete" onclick="document.getElementsByClassName('notification')[0].style.display='none'"></button></div>
                            
                        {% endif %}

    </form>

               
</div>
</div>
</div>
</section>


<section class="section">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h1>5 Days weather details based on the selection:</h2>
             
                <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th>City Name</th>
                        <th>Image</th>
                        <th>Rain</th>
                        <th>Description</th>
                        <th>Temp</th>
                        <th>Max_Temp</th>
                        <th>humidity</th>
                        <th>timestamp</th>
                        
                      </tr>
                    </thead>
                    

                {% for city_weather in weather_data %}
                <tbody>
                    <tr>
                        <td>{{ city_name }} </td>
                      <td>
                            <figure class="image is-50x50">
                                <img src="http://openweathermap.org/img/w/{{ city_weather.icon }}.png" alt="Image">
                            </figure>
                        </td>
                        <td>{{ city_weather.main}}</td>
                        <td>{{ city_weather.description }} </td>
                        <td>{{ city_weather.temp }}Â° F </td>
                        <td>{{ city_weather.max_temp}}</td>
                        
                        <td>{{ city_weather.humidity}}</td>
                        
                        <td>{{ city_weather.timestamp}}</td>
                       
                     </tr>   
                               
               {% endfor %}
            </div>
        </div>
    </div>
</section>

</body>